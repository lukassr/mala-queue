(async function(){try{const e=4,t="biz188",n=4,i=6,o=10,a={headers:{"content-type":"application/json"},method:"POST",credentials:"include"},c=e=>{const t=document.createElement("div");t.style="position: absolute; z-index: 1000; left: 20px; top: 20px; right: 20px; bottom: 20px; background: blue; color: white; text-align:center; padding: 20px";const n=document.createElement("div");n.appendChild(e);const i=document.createElement("button");return i.style="background: black; color: white;",i.innerText="OK",t.appendChild(n),t.appendChild(i),document.body.appendChild(t),new Promise(e=>{i.onclick=(()=>{document.body.removeChild(t),e()})})},r=e=>{const t=document.createElement("span");return t.innerText=e,c(t)},d=async(e,t,n,i)=>{const o=document.createElement("div"),a=document.createElement("div");a.innerText=e;const r=document.createElement("select");r.style="background: black; color: white";for(const e of t){const t=document.createElement("option");t.style="background: black; color: white",t.innerText=i(e),t.setAttribute("value",n(e)),r.appendChild(t)}return o.appendChild(a),o.appendChild(r),await c(o),r.value};document.body.innerHTML="",await r("Iniciando Mala Queue versiÃ³n "+e);const s=await fetch("/Compra/TraerTipoTicketsSectores",{...a,body:JSON.stringify({eventoID:t,eventoCalendarioID:n})});if(s.url.includes("Account/SignIn"))return await r("Inicia sesiÃ³n e intenta nuevamente"),void(window.location.href="https://www.puntoticket.com/Account/SignIn");const l=JSON.parse(await s.text()),p=l.TipoTickets.filter(e=>1===e.Disponible).filter(e=>e.TipoTicketID>=i).filter(e=>e.TipoTicketID<=o);if(!p.length)return void await r("No quedan tickets no numerados disponibles");await r(`Hay ${p.length} secciones con tickets no numerados disponibles`);const u=await d("SecciÃ³n",p,e=>e.TipoTicketID,e=>`${e.TipoTicket} (${e.Precio})`),m=await d("Cantidad de entradas",[1,2],e=>e.toString(),e=>e.toString());console.log({jcTipoTicket:u,jcCantidadTickets:m});const T=await fetch("/Compra/AgregarMultipleTickets",{...a,body:JSON.stringify({EventoID:t,EventoCalendarioID:n,CategoriaTicketID:"1",Tickets:[{TipoTicketID:u,Cantidad:m}]})}),g=JSON.parse(await T.text());if(!g.Success)return void await r("Error: "+g.ErrorList.join(", "));await r("Se agregaron las entradas al carro de compras. Redirigiendo al pago."),window.location.href="/Compra/Pago"}catch(e){alert("OcurriÃ³ un error: "+e.message)}})();